{% extends 'base.html' %}
{% block title %}Restaurants{% endblock %}

{% block content %}

<div class="container">
  <div class="row">
    <div class="col-sm-12">

      {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          {% for category, message in messages %}
            <div class="alert alert-{{ 'success' if category == 'success' else 'danger' }} alert-dismissible fade show" role="alert">
              {{ message }}
              <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            </div>
          {% endfor %}
        {% endif %}
      {% endwith %}

      <h1>All Cafes</h1>

	  <table class="table table-dark table-striped table-hover">
		  <thead>
			  <tr>
				  {% for header in cafes[0] %}
				  <th scope="col">{{ header }}</th>
				  {% endfor %}
			  </tr>
		  </thead>
		  <tbody>
			  {% for row in cafes[1:] %}
			  <tr>
				  {% for item in row %}
				  <td>
					  {% if item.startswith('http') %}
					  <a href="{{ item }}" target="_blank">Maps Link</a>
					  {% else %}
					  {{ item }}
					  {% endif %}
				  </td>
				  {% endfor %}
			  </tr>
			  {% endfor %}
		  </tbody>
  	  </table>

      <p><a href="{{ url_for('home') }}">Return to index page</a></p>

    </div>
  </div>
</div>

{% endblock %}
